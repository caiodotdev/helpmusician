{% extends 'base.html' %}
{% load static %}
{% load form_utils %}
{% load embed_video_tags %}

{% block content %}
    <div id="top" class="row">
        <div class="col-xs-12 text-center">
            <h2> {{ title }}</h2>
        </div>
    </div> <!-- /#top -->
    <div class="row">
        <div class="col-xs-3">
            <button class="btn btn-secondary" onclick="history.back()"><i class="fa fa-arrow-left"></i> Voltar</button>
        </div>
    </div>
    <hr/>
    <div class="row">
        <div class="col-xs-12 text-center">
            {% video url_video '640x360' %}
        </div>
    </div>
    <hr/>
    <div class="row">
        <div class="col-xs-6 col-sm-3">
            <a href="{{ url_video }}" target="_blank" class="btn btn-secondary btn-block"><i
                    class="fa fa-youtube-play"></i> Youtube
                Link</a>
        </div>
        <div class="col-xs-6 col-sm-3">
            <button class="btn btn-secondary btn-block" data-toggle="modal" data-target="#downloadModal"><i
                    class="fa fa-download"></i>
                Baixar MP3
            </button>
        </div>
        <div class="col-xs-6 col-sm-3 col-sm-offset-3">
            <!-- AddToAny BEGIN -->
            <label>Compartilhar:</label>
            <div class="a2a_kit a2a_kit_size_32 a2a_default_style">
                <a class="a2a_dd" href="https://www.addtoany.com/share"></a>
                <a class="a2a_button_whatsapp"></a>
                <a class="a2a_button_telegram"></a>
                <a class="a2a_button_facebook"></a>
                <a class="a2a_button_facebook_messenger"></a>
                <a class="a2a_button_google_gmail"></a>
            </div>
            <script async src="https://static.addtoany.com/menu/page.js"></script>
            <!-- AddToAny END -->
        </div>
    </div>
    <hr/>
    <div class="row">
        <div class="col-xs-6 col-sm-3">
            <div class="panel panel-success">
                <div class="panel-heading">
                    <label>Version ID</label>
                </div>
                <div class="panel-body">
                    <p>{{ result.versionId }}</p>
                </div>
            </div>
        </div>
        <div class="col-xs-6 col-sm-3">
            <div class="panel panel-info">
                <div class="panel-heading">
                    <label>BPM</label>
                </div>
                <div class="panel-body">
                    <p>{{ result.derivedBpm }}</p>
                </div>
            </div>
        </div>
        <div class="col-xs-6 col-sm-3">
            <div class="panel panel-warning">
                <div class="panel-heading">
                    <label>Tom</label>
                </div>
                <div class="panel-body">
                    <p>{{ result.derivedKey }}</p>
                </div>
            </div>
        </div>
        <div class="col-xs-6 col-sm-3">
            <div class="panel panel-danger">
                <div class="panel-heading">
                    <label>Tempo</label>
                </div>
                <div class="panel-body">
                    <p>{{ result.barLength }}</p>
                </div>
            </div>
        </div>
        <div class="col-xs-12 col-sm-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <label>Notas na Música</label>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-xs-12">
                            <form action="" method="get">
                                <div class="form-inline">
                                    <label>Selecionar Instrumento:</label>
                                    <input name="id" value="{{ id }}" class="hidden"/>
                                    <input name="title" value="{{ title }}" class="hidden"/>
                                    <select name="instrumento" class="form-control">
                                        <option value="guitar" selected></option>
                                        <option value="guitar">Guitarra/Violão</option>
                                        <option value="piano">Teclado</option>
                                    </select>
                                    <button type="submit" class="btn btn-secondary">Selecionar</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="row">
                        {% for note in notes %}

                            <div class="col-xs-6 col-sm-3 col-md-2 ">
                                <div class="panel panel-default">
                                    <div class="panel-body text-center">
                                        <img src="{{ note.image }}" class="img-responsive"/>
                                        <label>{{ note.note }}</label>
                                    </div>
                                </div>
                            </div>

                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="downloadModal" tabindex="-1" role="dialog" aria-labelledby="downloadModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Baixar</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <label>Ao abrir clicar em <b>"Download"</b>, irá abrir uma página. Basta apertar
                                <b>CTRL + S</b>, e salvar!</label>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-12">
                            <table class="table mt-5">
                                <thead class="thead-light">
                                <tr>
                                    <th scope="col">Resolução</th>
                                    <th scope="col">Tamanho</th>
                                    <th scope="col">Extensão</th>
                                    <th scope="col">Download</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for stream in streams %}
                                    <tr>
                                        <td>{{ stream.resolution }}</td>
                                        <td>{{ stream.file_size }}</td>
                                        <td>{{ stream.extension }}</td>
                                        <td><a href="{{ stream.video_url }}" style="text-decoration: none;"
                                               download="{{ title }}.{{ extension }}" target="_blank">Download <i
                                                class=" fa fa-download"></i></a></td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>

                            <p class="h3 text-center mt-5 mb-5">Apenas Audio</p>
                            <table class="table mt-5 mb-5">
                                <thead class="thead-light">
                                <tr>
                                    <th scope="col">Tamanho</th>
                                    <th scope="col">Extensão</th>
                                    <th scope="col">Download</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for stream in stream_audio %}
                                    <tr>
                                        <td>{{ stream.file_size }}</td>
                                        <td>{{ stream.extension }}</td>
                                        <td><a href="{{ stream.video_url }}" style="text-decoration: none;"
                                               download="{{ title }}.{{ extension }}" target="_blank">Download <i
                                                class=" fa fa-download"></i></a></td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    <script type="text/javascript">
        $(document).ready(function () {

        });

    </script>

{% endblock %}
